#include <windows.h>
#include <stdio.h>
#include <string.h>

int main(int argc, char* argv[]) {
    HANDLE hProcess = NULL; 
    DWORD PID = NULL; 
    LPVOID memoryAddress = NULL;
    char data[] = "beko";
    
    if (argc < 2) {
        printf("Usage: .\\program.exe <PID>\n");
        return EXIT_FAILURE;
    } 
    PID = atoi(argv[1]);

    hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, PID);
    if (hProcess == NULL) {
        printf("Opss.. Failed to Open Process!\n");
        return EXIT_FAILURE;
    }

    memoryAddress = VirtualAllocEx(hProcess, NULL, sizeof(data), (MEM_RESERVE | MEM_COMMIT), PAGE_EXECUTE_READWRITE);
    if (memoryAddress == NULL) {
        return EXIT_FAILURE;
    }
    printf("Allocated %zu-bytes on %p Address!\n", sizeof(data), memoryAddress);
}