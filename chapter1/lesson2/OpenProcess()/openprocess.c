#include <windows.h>
#include <stdio.h>

int main(int argc, char* argv[]) {
    HANDLE hProcess = NULL;
    DWORD PID = NULL;
    if (argc < 2) {
        /* Eğer Kullanıcı PID parametresini girmemişse hata verecek. Ardından program kapanacak. */
        printf("Usage: .\\program.exe <PID>\n");
        return EXIT_FAILURE;
    }
    /* Kullanıcıdan Alınan Process ID, PID değişkenine int'e çevrilerek aktarılıyor. */
    PID = atoi(argv[1]);

    /* Ardından OpenProcess işlemini gerçekleştiriyoruz. Bu API'nin geri dönüş adresini de HANDLE tipine sahip hProcess'e aktarıyoruz. */
    hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, PID);

    /* Eğer geri dönüş adresi NULL yani başarısız ile sonuçlanırsa programı bitiriyoruz. */
    if (hProcess == NULL) {
        printf("Opss... Failed to Find Process!. Error Code: 0x0%lx\n", GetLastError());
        return EXIT_FAILURE;
    }

    printf("WOOW Nice %d PID!\n", PID);
    return EXIT_SUCCESS;
}